---
layout: post
title: Aula 12
#image: /img/hello_world.jpeg
---

# Subrotinas 

## Apresentação
[Subrotinas](/introprog2024/pdf/aula12.pdf) 


## Exemplos

### Exemplo01
{% highlight perl linenos %}
# Descobrir a funcao da subrotina abaixo
# A funcao rand(EXPR) retorna um numero real entre 0 e o valor de EXPR
# A funcao int(EXPR) retorna a parte inteira do valor real EXPR (nao arredonda)

sub exemplo01 {
    for ($i = 0; $i < 40; $i++) {
        $base = int(rand(4));
        if ($base == 0) { 
            print "A"; 
            next;
        }
        if ($base == 1) {
            print "T";
            next;
        }
        if ($base == 2) {
            print "C";
            next;
        }
        if ($base == 3) {
            print "G";
            next;
        }
    }
    print "\n"; 
}
{% endhighlight %}

========

### Exemplo02
{% highlight perl linenos %}
#!/usr/bin/perl/

seqAleatoria(200);
exit;

sub seqAleatoria {
    $tamanho = shift || 40;
    for ($i = 0; $i < $tamanho; $i++) {
        unless ($i%70) { print "\n" };
        $base = int(rand(4));
        if ($base == 0) { print "A"; next; }
        if ($base == 1) { print "T"; next; }
        if ($base == 2) { print "C"; next; }
        if ($base == 3) { print "G"; next; }
    }
    print "\n"; 
}
{% endhighlight %}

========

### Exemplo03
{% highlight perl linenos %}
#!/usr/bin/perl/

soma(12, 20);
exit;

sub soma {
    ($n1, $n2) = @_;
    $res = $n1 + $n2;
    print "$res\n";
}
{% endhighlight %}

========

### Exemplo04
{% highlight perl linenos %}
#!/usr/bin/perl/

# corpo do script

# gerar sequencia aleatoria com a subrotina seqAleatoria
$tamanho = 200;
$sequencia = seqAleatoria($tamanho);

# inverter a sequencia
$revSeq = reverse($sequencia);

# gerar o complemento reverso
$revSeq =~ tr/ATCG/atcg/;

# imprimir (fasta)
print "\>seq\n";
for ($i = 0; $i < $tamanho; $i+=70) { 
    print substr($revSeq,$i,70), "\n"; 
}

exit;

sub seqAleatoria {
    # alterar a subrotina para retornar a sequencia gerada
}
{% endhighlight %}

========

### Exemplo05
{% highlight perl linenos %}
#!/usr/bin/perl/

# $valor como variavel global

$valor = 0;
print "Antes da subrotina, valor \= $valor.\n";

soma(12, 20);

print "Antes da subrotina, valor \= $valor.\n";
exit;

sub soma {
    ($n1, $n2) = @_;
    $valor = $n1 + $n2;
}
{% endhighlight %}

========

### Exemplo06
{% highlight perl linenos %}
#!/usr/bin/perl/

my $var_global = "GLOBAL"; # Variável global

mudar_var_global();  # Modifica a variável global
usar_var_local();    # Declara e usa uma variável local

# Exibe o valor da variável global
print "Fora das subrotinas: var_global = $var_global e var_local = $var_local\n";

exit; 

sub mudar_variavel_global {  # Acessa e modifica a variável global
    $var_global = "global";
    print "Dentro da subrotina: var_global é $var_global\n";
}

sub usar_var_local {  
    my $var_local = "local";  # Variável local
    print "Dentro da subrotina: val_local é $var_local\n";
}
{% endhighlight %}

========

### Exemplo07
{% highlight perl linenos %}
#!/usr/bin/perl/

use strict;

my $local_var   = "Eu sou local!";
our $global_var = "Eu sou global!";

print "$outra_local_var\n"; # erro devido ao escopo

exemplo();

exit;

sub exemplo {
    my $outra_local_var = "Outra variável local";
    print "$local_var\n";  # erro devido ao escopo
    print "$global_var\n"; # acessível
}
{% endhighlight %}

========

### Exemplo08
{% highlight perl linenos %}
#!/usr/bin/perl/

## --------------------------------------------------------------------- ##
##                                                                       ##
##  SCRIPT: seqAleatoria.pl                                 04.11.2024   ##
##                                                                       ##
##  DESCRIPTION: script para exemplificar subrotinas                     ##
##                                                                       ##
##  USAGE: perl seqAleatoria.pl                                          ##
##                                                                       ##
##  AUTHOR: Tatiana Torres    tttorres at ib.usp.br                      ##
##                                                                       ##
## --------------------------------------------------------------------- ##

use strict; 

## Declaracao de variaveis

my $tamanho;
my $sequencia;
my $revSeq;

## MAIN ##

# criar a sequencia aleatoria
$tamanho = 200;
$sequencia = seqAleatoria($tamanho);

# inverter a sequencia
$revSeq = reverse($sequencia);

# gerar o complemento reverso
$revSeq =~ tr/ATCG/atcg/;

# imprimir (fasta)
print "\>seq\n";
for (my $i = 0; $i < $tamanho; $i+=70) { print substr($revSeq,$i,70), "\n"; }

exit;


## SUBROTINAS ##

## subrotina para gerar sequencias aleatorias de nucleotideos
## argumento: tamanho da sequencia (numero de nucleotideos) 
## retorna: string com uma sequencia aleatoria

sub seqAleatoria {
    my $seq = "";
    my $tamanho = shift || 40;                 # default: $tamanho = 40
    for (my $i = 0; $i < $tamanho; $i++) {
        my $base = int(rand(4));
        if ($base == 0) { $seq .= "A"; next; }
        if ($base == 1) { $seq .= "T"; next; }
        if ($base == 2) { $seq .= "C"; next; }
        if ($base == 3) { $seq .= "G"; next; }
    }
    return $seq; 
}
{% endhighlight %}

========

